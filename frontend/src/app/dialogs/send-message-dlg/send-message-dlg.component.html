<form
  class="send-message-form"
  [formGroup]="scheduleDateTime"
  (ngSubmit)="sendMessage(scheduleDateTime)"
>
  <span style="margin-bottom: 20px; font-size: 18px">Send Message</span>
  <p style="color: gray; margin-bottom: 10px">
    Send a message to the patient based on your notes and their appointment
    reason.
  </p>

  <mat-form-field class="note-container">
    <mat-label>Add the purpose of the message</mat-label>
    <textarea
      style="resize: none"
      type="text"
      required
      matInput
      formControlName="messageReason"
    ></textarea>
  </mat-form-field>
  <div style="display: flex; justify-content: space-between; gap: 10px">
    <!-- Date Picker -->
    <mat-form-field>
      <mat-label>Choose a date</mat-label>
      <input
        matInput
        [matDatepicker]="datePicker"
        formControlName="date"
        required
      />
      <mat-datepicker-toggle
        matIconSuffix
        [for]="datePicker"
      ></mat-datepicker-toggle>
      <mat-datepicker #datePicker></mat-datepicker>
    </mat-form-field>

    <!-- Time Picker -->
    <mat-form-field>
      <mat-label>Choose a time</mat-label>
      <input
        [ngxMatTimepicker]="timePicker"
        matInput
        required
        formControlName="time"
      />
      <ngx-mat-timepicker-toggle
        matIconSuffix
        [for]="timePicker"
      ></ngx-mat-timepicker-toggle>
      <ngx-mat-timepicker #timePicker></ngx-mat-timepicker>
    </mat-form-field>
  </div>

  <button mat-raised-button color="primary" type="submit">Submit</button>
  @if(pending){
  <div class="loading"><mat-spinner></mat-spinner></div>
  }
</form>
